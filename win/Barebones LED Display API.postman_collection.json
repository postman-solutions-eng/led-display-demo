{
  "info": {
    "_postman_id": "92842d07-8d57-49f2-a8b3-f28f5fb9db5a",
    "name": "Barebones LED Display API",
    "description": "API for controlling LED name badge displays. This API allows you to update the text and visual content displayed on LED badges, including support for alphanumeric text and predefined icon codes.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Display Text",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "e39946e5-b143-492d-a011-b61b43112c4d",
            "exec": [
              "// ============================================",
              "// Update Badge Display Text - Request-Level Tests",
              "// ============================================",
              "// Endpoint: POST /display-text",
              "// Purpose: Updates the text and visual content displayed on the LED name badge",
              "",
              "// ==========================================",
              "// 1. SUCCESS RESPONSE TESTS (200 OK)",
              "// ==========================================",
              "",
              "if (pm.response.code === 200) {",
              "    const jsonData = pm.response.json();",
              "    ",
              "    // Test: Response has required fields",
              "    pm.test(\"Success: Response has 'status' field\", function () {",
              "        pm.expect(jsonData).to.have.property(\"status\");",
              "    });",
              "    ",
              "    pm.test(\"Success: Response has 'message' field\", function () {",
              "        pm.expect(jsonData).to.have.property(\"message\");",
              "    });",
              "    ",
              "    // Test: Status is 'success'",
              "    pm.test(\"Success: Status field equals 'success'\", function () {",
              "        pm.expect(jsonData.status).to.eql(\"success\");",
              "    });",
              "    ",
              "    // Test: Message confirms update",
              "    pm.test(\"Success: Message confirms display update\", function () {",
              "        pm.expect(jsonData.message.toLowerCase()).to.include(\"success\");",
              "    });",
              "    ",
              "    // Test: Data types are correct",
              "    pm.test(\"Success: 'status' is a string\", function () {",
              "        pm.expect(jsonData.status).to.be.a(\"string\");",
              "    });",
              "    ",
              "    pm.test(\"Success: 'message' is a string\", function () {",
              "        pm.expect(jsonData.message).to.be.a(\"string\");",
              "    });",
              "    ",
              "    // Test: If text is echoed back, validate it",
              "    if (jsonData.text !== undefined) {",
              "        pm.test(\"Success: Echoed text is a string\", function () {",
              "            pm.expect(jsonData.text).to.be.a(\"string\");",
              "        });",
              "        ",
              "        pm.test(\"Success: Echoed text is not empty\", function () {",
              "            pm.expect(jsonData.text.length).to.be.above(0);",
              "        });",
              "    }",
              "}",
              "",
              "// ==========================================",
              "// 2. BAD REQUEST TESTS (400)",
              "// ==========================================",
              "",
              "if (pm.response.code === 400) {",
              "    const jsonData = pm.response.json();",
              "    ",
              "    // Test: Error response structure",
              "    pm.test(\"400 Error: Response has 'status' field\", function () {",
              "        pm.expect(jsonData).to.have.property(\"status\");",
              "    });",
              "    ",
              "    pm.test(\"400 Error: Status is 'error'\", function () {",
              "        pm.expect(jsonData.status).to.eql(\"error\");",
              "    });",
              "    ",
              "    pm.test(\"400 Error: Response has 'message' field\", function () {",
              "        pm.expect(jsonData).to.have.property(\"message\");",
              "    });",
              "    ",
              "    pm.test(\"400 Error: Message is descriptive\", function () {",
              "        pm.expect(jsonData.message.length).to.be.above(10);",
              "    });",
              "    ",
              "    // Test: Specific error types",
              "    const errorMessage = jsonData.message.toLowerCase();",
              "    ",
              "    // Missing text field error",
              "    if (errorMessage.includes(\"missing\") && errorMessage.includes(\"text\")) {",
              "        pm.test(\"400 Error: Missing 'text' field error detected\", function () {",
              "            pm.expect(errorMessage).to.include(\"text\");",
              "        });",
              "    }",
              "    ",
              "    // Text too long error",
              "    if (errorMessage.includes(\"exceeds\") || errorMessage.includes(\"maximum\") || errorMessage.includes(\"length\")) {",
              "        pm.test(\"400 Error: Text length validation error detected\", function () {",
              "            pm.expect(errorMessage).to.satisfy(function(msg) {",
              "                return msg.includes(\"exceeds\") || msg.includes(\"maximum\") || msg.includes(\"length\") || msg.includes(\"128\");",
              "            });",
              "        });",
              "        ",
              "        pm.test(\"400 Error: Maximum length (128 chars) mentioned\", function () {",
              "            pm.expect(errorMessage).to.include(\"128\");",
              "        });",
              "    }",
              "    ",
              "    // Invalid icon code error",
              "    if (errorMessage.includes(\"invalid\") && errorMessage.includes(\"icon\")) {",
              "        pm.test(\"400 Error: Invalid icon code error detected\", function () {",
              "            pm.expect(errorMessage).to.include(\"icon\");",
              "        });",
              "        ",
              "        pm.test(\"400 Error: Suggests using /predefined-icons endpoint\", function () {",
              "            pm.expect(errorMessage).to.include(\"predefined-icons\");",
              "        });",
              "    }",
              "}",
              "",
              "// ==========================================",
              "// 3. NOT FOUND TESTS (404)",
              "// ==========================================",
              "",
              "if (pm.response.code === 404) {",
              "    const jsonData = pm.response.json();",
              "    ",
              "    pm.test(\"404 Error: Response has correct error structure\", function () {",
              "        pm.expect(jsonData).to.have.property(\"status\");",
              "        pm.expect(jsonData.status).to.eql(\"error\");",
              "        pm.expect(jsonData).to.have.property(\"message\");",
              "    });",
              "    ",
              "    pm.test(\"404 Error: Message indicates endpoint not found\", function () {",
              "        pm.expect(jsonData.message.toLowerCase()).to.include(\"not found\");",
              "    });",
              "}",
              "",
              "// ==========================================",
              "// 4. SERVER ERROR TESTS (500)",
              "// ==========================================",
              "",
              "if (pm.response.code === 500) {",
              "    const jsonData = pm.response.json();",
              "    ",
              "    pm.test(\"500 Error: Response has correct error structure\", function () {",
              "        pm.expect(jsonData).to.have.property(\"status\");",
              "        pm.expect(jsonData.status).to.eql(\"error\");",
              "        pm.expect(jsonData).to.have.property(\"message\");",
              "    });",
              "    ",
              "    pm.test(\"500 Error: Message indicates hardware/server failure\", function () {",
              "        const errorMessage = jsonData.message.toLowerCase();",
              "        pm.expect(errorMessage).to.satisfy(function(msg) {",
              "            return msg.includes(\"hardware\") || msg.includes(\"fail\") || msg.includes(\"server\") || msg.includes(\"communication\");",
              "        });",
              "    });",
              "}",
              "",
              "// ==========================================",
              "// 5. REQUEST VALIDATION TESTS",
              "// ==========================================",
              "",
              "pm.test(\"Request method is POST\", function () {",
              "    pm.expect(pm.request.method).to.eql(\"POST\");",
              "});",
              "",
              "pm.test(\"Request has Content-Type header\", function () {",
              "    pm.expect(pm.request.headers.has(\"Content-Type\")).to.be.true;",
              "});",
              "",
              "pm.test(\"Content-Type is application/json\", function () {",
              "    const contentType = pm.request.headers.get(\"Content-Type\");",
              "    pm.expect(contentType).to.include(\"application/json\");",
              "});",
              "",
              "// Validate request body structure",
              "pm.test(\"Request body is valid JSON\", function () {",
              "    try {",
              "        const requestBody = JSON.parse(pm.request.body.raw);",
              "        pm.expect(requestBody).to.be.an(\"object\");",
              "    } catch (e) {",
              "        pm.expect.fail(\"Request body is not valid JSON\");",
              "    }",
              "});",
              "",
              "// ==========================================",
              "// 6. BUSINESS LOGIC TESTS",
              "// ==========================================",
              "",
              "// Parse request body for validation",
              "let requestBody;",
              "try {",
              "    requestBody = JSON.parse(pm.request.body.raw);",
              "} catch (e) {",
              "    requestBody = null;",
              "}",
              "",
              "if (requestBody) {",
              "    // Test: Text field validation",
              "    if (requestBody.text !== undefined) {",
              "        pm.test(\"Business Logic: 'text' field is a string\", function () {",
              "            pm.expect(requestBody.text).to.be.a(\"string\");",
              "        });",
              "        ",
              "        pm.test(\"Business Logic: Text length is within limit (128 chars)\", function () {",
              "            pm.expect(requestBody.text.length).to.be.at.most(128);",
              "        });",
              "        ",
              "        // Test: Icon format validation",
              "        const iconPattern = /\\{([^}]+)\\}/g;",
              "        const icons = requestBody.text.match(iconPattern);",
              "        ",
              "        if (icons && icons.length > 0) {",
              "            pm.test(\"Business Logic: Icon codes follow {icon_name} format\", function () {",
              "                icons.forEach(function(icon) {",
              "                    // Extract icon name without braces",
              "                    const iconName = icon.slice(1, -1);",
              "                    pm.expect(iconName).to.match(/^icon_[a-z_]+$/);",
              "                });",
              "            });",
              "            ",
              "            console.log(\"Icons found in text: \" + icons.join(\", \"));",
              "        }",
              "    }",
              "}",
              "",
              "// ==========================================",
              "// 7. SCHEMA VALIDATION",
              "// ==========================================",
              "",
              "// Success response schema",
              "const successSchema = {",
              "    \"type\": \"object\",",
              "    \"required\": [\"status\", \"message\"],",
              "    \"properties\": {",
              "        \"status\": { \"type\": \"string\", \"enum\": [\"success\"] },",
              "        \"message\": { \"type\": \"string\" },",
              "        \"text\": { \"type\": \"string\" }",
              "    }",
              "};",
              "",
              "// Error response schema",
              "const errorSchema = {",
              "    \"type\": \"object\",",
              "    \"required\": [\"status\", \"message\"],",
              "    \"properties\": {",
              "        \"status\": { \"type\": \"string\", \"enum\": [\"error\"] },",
              "        \"message\": { \"type\": \"string\" }",
              "    }",
              "};",
              "",
              "if (pm.response.code === 200) {",
              "    pm.test(\"Schema: Success response has required fields\", function () {",
              "        const jsonData = pm.response.json();",
              "        pm.expect(jsonData).to.have.all.keys(\"status\", \"message\");",
              "    });",
              "}",
              "",
              "if (pm.response.code >= 400) {",
              "    pm.test(\"Schema: Error response has required fields\", function () {",
              "        const jsonData = pm.response.json();",
              "        pm.expect(jsonData).to.include.all.keys(\"status\", \"message\");",
              "    });",
              "}",
              "",
              "// ==========================================",
              "// 8. EDGE CASE TESTS",
              "// ==========================================",
              "",
              "if (requestBody && requestBody.text !== undefined) {",
              "    // Empty text test",
              "    if (requestBody.text === \"\") {",
              "        pm.test(\"Edge Case: Empty text handling\", function () {",
              "            // Empty text might be valid or return 400 depending on API design",
              "            pm.expect(pm.response.code).to.be.oneOf([200, 400]);",
              "        });",
              "    }",
              "    ",
              "    // Special characters test",
              "    const hasSpecialChars = /[<>&\"']/.test(requestBody.text);",
              "    if (hasSpecialChars) {",
              "        pm.test(\"Edge Case: Special characters handled\", function () {",
              "            // Should either succeed or return proper error",
              "            pm.expect(pm.response.code).to.be.oneOf([200, 400]);",
              "        });",
              "    }",
              "    ",
              "    // Unicode characters test",
              "    const hasUnicode = /[^\\x00-\\x7F]/.test(requestBody.text);",
              "    if (hasUnicode) {",
              "        pm.test(\"Edge Case: Unicode characters handled\", function () {",
              "            pm.expect(pm.response.code).to.be.oneOf([200, 400]);",
              "        });",
              "    }",
              "    ",
              "    // Boundary test: exactly 128 characters",
              "    if (requestBody.text.length === 128) {",
              "        pm.test(\"Boundary: Text at maximum length (128 chars) accepted\", function () {",
              "            pm.expect(pm.response.code).to.eql(200);",
              "        });",
              "    }",
              "    ",
              "    // Boundary test: 129 characters (over limit)",
              "    if (requestBody.text.length === 129) {",
              "        pm.test(\"Boundary: Text over maximum length (129 chars) rejected\", function () {",
              "            pm.expect(pm.response.code).to.eql(400);",
              "        });",
              "    }",
              "}",
              "",
              "// ==========================================",
              "// 9. PERFORMANCE TESTS",
              "// ==========================================",
              "",
              "pm.test(\"Performance: Display update under 1500ms\", function () {",
              "    pm.expect(pm.response.responseTime).to.be.below(1500);",
              "});",
              "",
              "// ==========================================",
              "// 10. SECURITY TESTS",
              "// ==========================================",
              "",
              "// Test: Response doesn't expose internal errors",
              "if (pm.response.code === 500) {",
              "    pm.test(\"Security: No stack trace in error response\", function () {",
              "        const responseText = pm.response.text();",
              "        pm.expect(responseText.toLowerCase()).to.not.include(\"stack\");",
              "        pm.expect(responseText.toLowerCase()).to.not.include(\"trace\");",
              "        pm.expect(responseText).to.not.include(\"at \");",
              "    });",
              "}",
              "",
              "// Test: No SQL injection indicators in response",
              "pm.test(\"Security: No SQL error indicators in response\", function () {",
              "    const responseText = pm.response.text().toLowerCase();",
              "    pm.expect(responseText).to.not.include(\"sql\");",
              "    pm.expect(responseText).to.not.include(\"syntax error\");",
              "    pm.expect(responseText).to.not.include(\"mysql\");",
              "    pm.expect(responseText).to.not.include(\"postgresql\");",
              "});",
              "",
              "// ==========================================",
              "// 11. LOGGING",
              "// ==========================================",
              "",
              "console.log(\"=== Update Badge Display Text ===\");",
              "console.log(\"Request Text: \" + (requestBody ? requestBody.text : \"N/A\"));",
              "console.log(\"Response Status: \" + pm.response.code);",
              "console.log(\"Response Time: \" + pm.response.responseTime + \"ms\");"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "id": "45b44a73-e690-4a68-bc2c-6925366f35cc",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"text\": \"Hello World!\"\n}",
          "options": {
            "raw": {
              "headerFamily": "json",
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl}}/display-text",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "display-text"
          ]
        },
        "description": "Updates the text and visual content displayed on the LED name badge. Accepts text and icon codes in the format :icon_name:.\n\n<img src=\"https://content.pstmn.io/05b1ef2c-9fd3-4f0e-8b2f-76998fb3f6e5/aW1hZ2UucG5n\" width=\"240\">"
      },
      "response": [
        {
          "id": "e2b14b5f-cfc4-422b-90c4-f07c9e546dc3",
          "name": "Success with Text + Heart Icon",
          "originalRequest": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Hello World! :heart:\"\n}",
              "options": {
                "raw": {
                  "headerFamily": "json",
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/display-text",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "display-text"
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Server",
              "value": "Werkzeug/3.1.5 Python/3.13.7",
              "description": {
                "content": "",
                "type": "text/plain"
              }
            },
            {
              "key": "Date",
              "value": "Mon, 19 Jan 2026 12:16:21 GMT",
              "description": {
                "content": "",
                "type": "text/plain"
              }
            },
            {
              "key": "Content-Length",
              "value": "65",
              "description": {
                "content": "",
                "type": "text/plain"
              }
            },
            {
              "key": "Connection",
              "value": "close",
              "description": {
                "content": "",
                "type": "text/plain"
              }
            },
            {
              "key": "Content-Type",
              "value": "application/json",
              "description": {
                "content": "",
                "type": "text/plain"
              }
            }
          ],
          "cookie": [],
          "body": "{\n    \"status\": \"Text displayed on LED\",\n    \"text\": \"Hello World! :heart:\"\n}"
        },
        {
          "id": "5a0fcff5-39a7-4ae9-8fb1-3c7464bc45d2",
          "name": "Failure HTML Response (Unicode)?",
          "originalRequest": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Hello World!\"\n}",
              "options": {
                "raw": {
                  "headerFamily": "json",
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/display-text",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "display-text"
              ]
            }
          },
          "status": "Bad Request",
          "code": 400,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            },
            {
              "key": "Server",
              "value": "Werkzeug/3.1.4 Python/3.13.5",
              "description": {
                "content": "",
                "type": "text/plain"
              }
            },
            {
              "key": "Date",
              "value": "Mon, 19 Jan 2026 12:47:31 GMT",
              "description": {
                "content": "",
                "type": "text/plain"
              }
            },
            {
              "key": "Content-Length",
              "value": "69",
              "description": {
                "content": "",
                "type": "text/plain"
              }
            },
            {
              "key": "Connection",
              "value": "close",
              "description": {
                "content": "",
                "type": "text/plain"
              }
            }
          ],
          "cookie": [],
          "body": "{\n  \"details\": \"'üåç'\",\n  \"error\": \"Invalid display string format\"\n}"
        },
        {
          "id": "506e3707-b9e5-4db0-acc3-0e8af7c69360",
          "name": "Error when not started with right permissions",
          "originalRequest": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Hello World!\"\n}",
              "options": {
                "raw": {
                  "headerFamily": "json",
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/display-text",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "display-text"
              ]
            }
          },
          "status": "Internal Server Error",
          "code": 500,
          "_postman_previewlanguage": "Text",
          "header": [
            {
              "key": "Server",
              "value": "Werkzeug/3.1.4 Python/3.13.5",
              "description": {
                "content": "",
                "type": "text/plain"
              }
            },
            {
              "key": "Date",
              "value": "Mon, 19 Jan 2026 12:16:58 GMT",
              "description": {
                "content": "",
                "type": "text/plain"
              }
            },
            {
              "key": "Content-Length",
              "value": "265",
              "description": {
                "content": "",
                "type": "text/plain"
              }
            },
            {
              "key": "Connection",
              "value": "close",
              "description": {
                "content": "",
                "type": "text/plain"
              }
            },
            {
              "key": "Content-Type",
              "value": "text/html; charset=utf-8"
            }
          ],
          "cookie": [],
          "body": "<!doctype html><html lang=en><title>500 Internal Server Error</title><h1>Internal Server Error</h1><p>The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.</p>"
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "id": "dd5c5b44-fc6b-47b6-8a23-19edc6364e8d",
        "type": "text/javascript",
        "packages": {},
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "id": "6329a233-2e96-4f4e-b6fb-b11a46b83e69",
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    }
  ],
  "variable": [
    {
      "id": "b9647965-9905-4697-960c-dbe1a4921b13",
      "key": "baseUrl",
      "value": "http://127.0.0.1:5001",
      "type": "any"
    }
  ]
}